{% extends "base.html" %} {% block content %}
<div class="dashboard-content">
  <div class="welcome-banner">
    <h1>Welcome back, {{ user.username }}</h1>
    <p>System operational. Ready for command.</p>
  </div>

  <div class="stats-row">
    <div class="stat-card">
      <div class="stat-icon cpu-color">
        <i class="fas fa-microchip"></i>
      </div>
      <div class="stat-details">
        <h3>CPU</h3>
        <h2 id="cpu-text">0%</h2>
        <div class="progress-track">
          <div
            class="progress-fill cpu-fill"
            id="cpu-bar"
            style="width: 0%"
          ></div>
        </div>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon ram-color">
        <i class="fas fa-memory"></i>
      </div>
      <div class="stat-details">
        <h3>RAM</h3>
        <h2 id="ram-text">0%</h2>
        <div class="progress-track">
          <div
            class="progress-fill ram-fill"
            id="ram-bar"
            style="width: 0%"
          ></div>
        </div>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon disk-color">
        <i class="fas fa-hdd"></i>
      </div>
      <div class="stat-details">
        <h3>DISK</h3>
        <h2 id="disk-text">0%</h2>
        <div class="progress-track">
          <div
            class="progress-fill disk-fill"
            id="disk-bar"
            style="width: 0%"
          ></div>
        </div>
      </div>
    </div>
  </div>

  <div class="dashboard-split">
    <div class="panel-left">
      <div class="section-header">
        <h2><i class="fas fa-rocket"></i> Applications</h2>
      </div>
      <div class="apps-grid">
        <a href="https://google.com" target="_blank" class="app-card">
          <div class="app-icon"><i class="fab fa-google"></i></div>
          <span>Search</span>
        </a>
        <a href="#" class="app-card">
          <div class="app-icon"><i class="fas fa-server"></i></div>
          <span>Portainer</span>
        </a>
        <a href="#" class="app-card">
          <div class="app-icon"><i class="fas fa-shield-alt"></i></div>
          <span>Pi-hole</span>
        </a>
        <a href="#" class="app-card">
          <div class="app-icon"><i class="fas fa-play"></i></div>
          <span>Plex</span>
        </a>
        <a href="#" class="app-card add-new">
          <div class="app-icon"><i class="fas fa-plus"></i></div>
          <span>Add New</span>
        </a>
      </div>
    </div>

    <div class="panel-right">
      <div class="section-header">
        <h2><i class="fas fa-tasks"></i> Quick Tasks</h2>
      </div>
      <div class="tasks-card">
        <div class="task-row">
          <div class="task-status urgent"></div>
          <div class="task-info">
            <span class="task-title">System Update</span>
            <span class="task-meta">Pending - High Priority</span>
          </div>
          <button class="btn-check"><i class="fas fa-check"></i></button>
        </div>

        <div class="task-row">
          <div class="task-status normal"></div>
          <div class="task-info">
            <span class="task-title">Check Logs</span>
            <span class="task-meta">Daily Routine</span>
          </div>
          <button class="btn-check"><i class="fas fa-check"></i></button>
        </div>

        <a href="#" class="view-all-tasks"
          >View all tasks <i class="fas fa-arrow-right"></i
        ></a>
      </div>
    </div>
  </div>
</div>

<script>
  function updateStats() {
    fetch("/api/stats")
      .then((res) => res.json())
      .then((data) => {
        document.getElementById("cpu-text").innerText = data.cpu + "%";
        document.getElementById("cpu-bar").style.width = data.cpu + "%";
        document.getElementById("ram-text").innerText = data.ram + "%";
        document.getElementById("ram-bar").style.width = data.ram + "%";
        document.getElementById("disk-text").innerText = data.disk + "%";
        document.getElementById("disk-bar").style.width = data.disk + "%";
      })
      .catch((e) => console.error(e));
  }
  setInterval(updateStats, 5000);
  updateStats();
</script>
{% endblock %}
